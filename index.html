<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãŠé‡‘ã®ãƒã‚¤ãƒ³ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯è¨ºæ–­ãƒ†ã‚¹ãƒˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght @300;400;500;600;700&display=swap');
        body { font-family: 'Noto Sans JP', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-shadow { box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .progress-bar { transition: width 0.3s ease; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .pulse-animation { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white py-6">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-2xl md:text-3xl font-bold mb-2">ğŸ’° ãŠé‡‘ã®ãƒã‚¤ãƒ³ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯è¨ºæ–­ãƒ†ã‚¹ãƒˆ</h1>
            <p class="text-blue-100">èµ·æ¥­å®¶ã®ã‚ãªãŸã®ã€ŒãŠé‡‘ã®æ€ã„è¾¼ã¿ã€ã‚’è¨ºæ–­ã—ã¾ã™</p>
        </div>
    </header>

    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="fade-in">
            <div class="bg-white rounded-xl card-shadow p-8 text-center">
                <div class="text-6xl mb-6">ğŸ¯</div>
                <h2 class="text-2xl font-bold text-gray-800 mb-4">è¨ºæ–­ã‚’å§‹ã‚ã¾ã—ã‚‡ã†</h2>
                <p class="text-gray-600 mb-6 leading-relaxed">
                    10å€‹ã®è³ªå•ã«ç­”ãˆã¦ã€ã‚ãªãŸã®ã€ŒãŠé‡‘ã®ãƒã‚¤ãƒ³ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã€ãƒ¬ãƒ™ãƒ«ã‚’è¨ºæ–­ã—ã¾ã™ã€‚<br>
                    æ­£ç›´ãªæ°—æŒã¡ã§å›ç­”ã—ã¦ãã ã•ã„ã­ã€‚
                </p>
                <button onclick="startTest()" class="bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-8 rounded-lg transition-colors pulse-animation">
                    è¨ºæ–­ã‚¹ã‚¿ãƒ¼ãƒˆ âœ¨
                </button>
            </div>
        </div>

        <!-- Test Screen -->
        <div id="testScreen" class="hidden">
            <!-- Progress Bar -->
            <div class="bg-white rounded-xl card-shadow p-6 mb-6">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm font-medium text-gray-600">é€²æ—</span>
                    <span class="text-sm font-medium text-purple-600" id="progressText">1/10</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-3">
                    <div class="bg-gradient-to-r from-purple-500 to-pink-500 h-3 rounded-full progress-bar" id="progressBar" style="width: 10%"></div>
                </div>
            </div>

            <!-- Question Card -->
            <div class="bg-white rounded-xl card-shadow p-8 fade-in">
                <div class="text-center mb-6">
                    <div class="text-4xl mb-4" id="questionIcon">ğŸ’­</div>
                    <h3 class="text-xl font-bold text-gray-800 mb-4" id="questionText"></h3>
                </div>

                <div class="space-y-3" id="answerOptions">
                    <!-- Answer options will be inserted here -->
                </div>

                <div class="flex justify-between mt-8">
                    <button onclick="previousQuestion()" id="prevBtn" class="bg-gray-300 hover:bg-gray-400 text-gray-700 font-semibold py-2 px-6 rounded-lg transition-colors disabled:opacity-50" disabled>
                        â† å‰ã¸
                    </button>
                    <button onclick="nextQuestion()" id="nextBtn" class="bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-6 rounded-lg transition-colors disabled:opacity-50" disabled>
                        æ¬¡ã¸ â†’
                    </button>
                </div>
            </div>
        </div>

        <!-- Registration Screen -->
        <div id="registrationScreen" class="hidden">
            <div class="bg-white rounded-xl card-shadow p-8 fade-in">
                <div class="text-center mb-6">
                    <div class="text-5xl mb-4">ğŸ“</div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">è¨ºæ–­å®Œäº†ï¼</h2>
                    <p class="text-gray-600">çµæœã‚’è¦‹ã‚‹ãŸã‚ã«ã€ãŠåå‰ã¨ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
                </div>

                <form id="registrationForm" class="max-w-md mx-auto">
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2">ãŠåå‰ *</label>
                        <input type="text" id="userName" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200" placeholder="å±±ç”°å¤ªéƒ">
                    </div>
                    <div class="mb-6">
                        <label class="block text-gray-700 text-sm font-bold mb-2">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ *</label>
                        <input type="email" id="userEmail" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200" placeholder="example @email.com">
                        <div id="emailError" class="text-red-500 text-sm mt-1 hidden">æ­£ã—ã„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
                    </div>
                    <button type="submit" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                        è¨ºæ–­çµæœã‚’è¦‹ã‚‹ ğŸ‰
                    </button>
                </form>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="hidden">
            <div class="bg-white rounded-xl card-shadow p-8 fade-in">
                <div class="text-center mb-8">
                    <div class="text-6xl mb-4" id="resultIcon"></div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">è¨ºæ–­çµæœ</h2>
                    <div class="text-4xl font-bold text-purple-600 mb-2" id="totalScore"></div>
                    <div class="text-xl font-semibold text-gray-700" id="resultType"></div>
                </div>

                <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-6 mb-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-3">ğŸ“‹ ã‚ãªãŸã®ã‚¿ã‚¤ãƒ—</h3>
                    <p class="text-gray-700 leading-relaxed" id="resultDescription"></p>
                </div>

                <div class="bg-blue-50 rounded-lg p-6 mb-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-3">ğŸ’¡ ã‚¢ãƒ‰ãƒã‚¤ã‚¹</h3>
                    <p class="text-gray-700 leading-relaxed" id="resultAdvice"></p>
                </div>

                <div class="bg-green-50 rounded-lg p-6 mb-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-3">ğŸ¯ ä»Šã™ãã§ãã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h3>
                    <p class="text-gray-700 leading-relaxed" id="resultAction"></p>
                </div>

                <div class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-lg p-6 text-center">
                    <h3 class="text-lg font-bold text-gray-800 mb-3">ğŸ“š ã•ã‚‰ã«è©³ã—ãå­¦ã³ãŸã„æ–¹ã¸</h3>
                    <p class="text-gray-700 mb-4">ãŠé‡‘ã®ãƒã‚¤ãƒ³ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚’æ ¹æœ¬ã‹ã‚‰è§£é™¤ã™ã‚‹ç„¡æ–™ãƒ¡ãƒ«ãƒã‚¬è¬›åº§ã‚’ã”ç”¨æ„ã—ã¦ã„ã¾ã™</p>
                    <a href="https://my928p.com/p/r/5jDGyqWH" target="_blank" class="inline-block bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                        ç„¡æ–™ãƒ¡ãƒ«ãƒã‚¬è¬›åº§ã«å‚åŠ ã™ã‚‹ ğŸ“§
                    </a>
                </div>

                <div class="text-center mt-8">
                    <button onclick="restartTest()" class="bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-6 rounded-lg transition-colors">
                        ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹
                    </button>
                </div>
            </div>
        </div>

        <!-- Admin Panel (Hidden by default) -->
        <div id="adminPanel" class="hidden mt-8">
            <div class="bg-white rounded-xl card-shadow p-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">ç®¡ç†è€…ãƒ‘ãƒãƒ«</h2>
                    <button onclick="exportData()" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors">
                        ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
                    </button>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full table-auto">
                        <thead>
                            <tr class="bg-gray-100">
                                <th class="px-4 py-2 text-left">æ—¥æ™‚</th>
                                <th class="px-4 py-2 text-left">ãŠåå‰</th>
                                <th class="px-4 py-2 text-left">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</th>
                                <th class="px-4 py-2 text-left">ã‚¹ã‚³ã‚¢</th>
                                <th class="px-4 py-2 text-left">ã‚¿ã‚¤ãƒ—</th>
                            </tr>
                        </thead>
                        <tbody id="adminTableBody">
                            <!-- Data will be inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Test data and state
        const questions = [
            {
                text: "è‡ªåˆ†ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚„å•†å“ã«å€¤æ®µã‚’ã¤ã‘ã‚‹ã¨ãã€ã€Œæœ¬å½“ã«ã“ã®ä¾¡æ ¼ã§ã„ã„ã®ã‹ãªâ€¦ã€ã¨è¿·ã†ã“ã¨ãŒã‚ã‚‹ã€‚",
                icon: "ğŸ’°"
            },
            {
                text: "ãŠå®¢æ§˜ã«ä¾¡æ ¼ã‚’ä¼ãˆã‚‹ã¨ãã€ã¤ã„ç”³ã—è¨³ãªã•ãã†ãªå£°ã«ãªã£ã¦ã—ã¾ã†ã€‚",
                icon: "ğŸ˜…"
            },
            {
                text: "ã€Œé«˜ã„ã€ã¨è¨€ã‚ã‚Œã‚‹ã®ãŒæ€–ãã¦ã€å€¤ä¸‹ã’ã‚„å‰²å¼•ã‚’ã—ã¦ã—ã¾ã£ãŸã“ã¨ãŒã‚ã‚‹ã€‚",
                icon: "ğŸ˜°"
            },
            {
                text: "è‡ªåˆ†ã®ã‚µãƒ¼ãƒ“ã‚¹ã«ã€Œã“ã‚“ãªå€¤æ®µã‚’ã‚‚ã‚‰ã£ã¦ã„ã„ã®ã ã‚ã†ã‹ï¼Ÿã€ã¨ç½ªæ‚ªæ„Ÿã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚",
                icon: "ğŸ˜”"
            },
            {
                text: "æ–°ã—ã„å­¦ã³ã‚„è¨­å‚™ãªã©ã€è‡ªå·±æŠ•è³‡ã‚’ã—ãŸã„ã‘ã©ã€Œä»Šã¯ãŠé‡‘ã‚’ä½¿ã†ã¹ãã˜ã‚ƒãªã„ã‹ã‚‚â€¦ã€ã¨è¿·ã£ã¦ã—ã¾ã†ã€‚",
                icon: "ğŸ¤”"
            },
            {
                text: "ã€ŒãŠé‡‘ã®è©±ã€ã‚’ã™ã‚‹ã¨ã€ç›¸æ‰‹ã«å«Œã‚ã‚Œã‚‹ã®ã§ã¯â€¦ã¨ä¸å®‰ã«ãªã‚‹ã€‚",
                icon: "ğŸ˜Ÿ"
            },
            {
                text: "ãŠé‡‘ã®ç®¡ç†ã‚„çµŒè²»ã®ã“ã¨ã«ãªã‚‹ã¨ã€å¾Œå›ã—ã«ã—ãŸããªã‚‹ã€‚",
                icon: "ğŸ“Š"
            },
            {
                text: "å°†æ¥ã€å®‰å®šã—ã¦ç¨¼ã’ã‚‹ã‹ã©ã†ã‹ã€ãšã£ã¨ä¸å®‰ãŒã‚ã‚‹ã€‚",
                icon: "ğŸŒ…"
            },
            {
                text: "ã€Œå‹ã ã¡ä¾¡æ ¼ã€ã‚„ã€Œç„¡æ–™ã€ã§ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ãŸã“ã¨ãŒã‚ã‚‹ã€‚",
                icon: "ğŸ¤"
            },
            {
                text: "ä»–ã®äººã¨è‡ªåˆ†ã®ä¾¡æ ¼ã‚„å£²ä¸Šã‚’æ¯”ã¹ã¦ã€è½ã¡è¾¼ã‚“ã§ã—ã¾ã†ã“ã¨ãŒã‚ã‚‹ã€‚",
                icon: "ğŸ“ˆ"
            }
        ];

        const answerOptions = [
            { text: "ã‚ˆãã‚ã‚‹", value: 3, color: "bg-red-100 hover:bg-red-200 border-red-300" },
            { text: "ãŸã¾ã«ã‚ã‚‹", value: 2, color: "bg-orange-100 hover:bg-orange-200 border-orange-300" },
            { text: "ã‚ã¾ã‚Šãªã„", value: 1, color: "bg-yellow-100 hover:bg-yellow-200 border-yellow-300" },
            { text: "ã¾ã£ãŸããªã„", value: 0, color: "bg-green-100 hover:bg-green-200 border-green-300" }
        ];

        let currentQuestion = 0;
        let answers = [];
        let userData = {};

        // Initialize test
        function startTest() {
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('testScreen').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('questionIcon').textContent = question.icon;
            document.getElementById('questionText').textContent = question.text;
            document.getElementById('progressText').textContent = `${currentQuestion + 1}/10`;
            document.getElementById('progressBar').style.width = `${((currentQuestion + 1) / 10) * 100}%`;

            // Create answer options
            const optionsContainer = document.getElementById('answerOptions');
            optionsContainer.innerHTML = '';

            answerOptions.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = `w-full p-4 text-left border-2 rounded-lg transition-all ${option.color} ${answers[currentQuestion] === option.value ? 'ring-2 ring-purple-500' : ''}`;
                button.innerHTML = `
                    <div class="flex justify-between items-center">
                        <span class="font-medium">${option.text}</span>
                        <span class="text-sm text-gray-600">${option.value}ç‚¹</span>
                    </div>
                `;
                button.onclick = () => selectAnswer(option.value);
                optionsContainer.appendChild(button);
            });

            // Update navigation buttons
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').disabled = answers[currentQuestion] === undefined;
        }

        function selectAnswer(value) {
            answers[currentQuestion] = value;
            document.getElementById('nextBtn').disabled = false;
            showQuestion(); // Refresh to show selection
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                showRegistration();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        function showRegistration() {
            document.getElementById('testScreen').classList.add('hidden');
            document.getElementById('registrationScreen').classList.remove('hidden');
        }

        // Registration form handling
        document.getElementById('registrationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('userName').value.trim();
            const email = document.getElementById('userEmail').value.trim();
            
            // Email validation
            const emailRegex = /^[^\\s @]+ @[^\\s @]+\\. [^\\s @]+$/;
            if (!emailRegex.test(email)) {
                document.getElementById('emailError').classList.remove('hidden');
                return;
            }
            
            document.getElementById('emailError').classList.add('hidden');
            
            userData = { name, email };
            saveUserData();
            showResults();
        });

        function showResults() {
            const totalScore = answers.reduce((sum, score) => sum + score, 0);
            const result = getResultType(totalScore);
            
            document.getElementById('registrationScreen').classList.add('hidden');
            document.getElementById('resultsScreen').classList.remove('hidden');
            
            document.getElementById('resultIcon').textContent = result.icon;
            document.getElementById('totalScore').textContent = `${totalScore}ç‚¹`;
            document.getElementById('resultType').textContent = result.type;
            document.getElementById('resultDescription').textContent = result.description;
            document.getElementById('resultAdvice').textContent = result.advice;
            document.getElementById('resultAction').textContent = result.action;
        }

        function getResultType(score) {
            if (score <= 7) {
                return {
                    type: "ãƒã‚¤ãƒ³ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ï¼šã»ã¼ãªã—",
                    icon: "ğŸŒŸ",
                    description: "ç´ æ™´ã‚‰ã—ã„ã§ã™ï¼ã‚ãªãŸã¯ãŠé‡‘ã«å¯¾ã—ã¦å¥å…¨ãªãƒã‚¤ãƒ³ãƒ‰ã‚»ãƒƒãƒˆã‚’æŒã£ã¦ã„ã¾ã™ã€‚è‡ªåˆ†ã®ä¾¡å€¤ã‚’é©åˆ‡ã«è©•ä¾¡ã—ã€å ‚ã€…ã¨ä¾¡æ ¼è¨­å®šãŒã§ãã¦ã„ã‚‹ã‚ˆã†ã§ã™ã­ã€‚",
                    advice: "ç¾åœ¨ã®è‰¯ã„çŠ¶æ…‹ã‚’ç¶­æŒã—ãªãŒã‚‰ã€ã•ã‚‰ãªã‚‹æˆé•·ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚æ™‚ã€…ã€è‡ªåˆ†ã®ä¾¡å€¤è¦³ã‚’è¦‹ç›´ã—ã¦ã€ã‚ˆã‚Šé«˜ã„ä¾¡å€¤æä¾›ãŒã§ãã‚‹ã‚ˆã†æ„è­˜ã—ã¦ã¿ã¦ãã ã•ã„ã€‚",
                    action: "ä»Šã®ä¾¡æ ¼è¨­å®šã‚’è¦‹ç›´ã—ã¦ã€æä¾›ä¾¡å€¤ã«è¦‹åˆã£ãŸé©æ­£ä¾¡æ ¼ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚"
                };
            } else if (score <= 17) {
                return {
                    type: "ãƒã‚¤ãƒ³ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ï¼šã‚„ã‚„ã‚ã‚Š",
                    icon: "ğŸŒ±",
                    description: "ãŠé‡‘ã«å¯¾ã—ã¦å°‘ã—é æ…®ãŒã¡ãªå‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚è‡ªåˆ†ã®ä¾¡å€¤ã‚’èªã‚ã‚‹ã“ã¨ã«ã€ã¾ã å°‘ã—æŠµæŠ—ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã§ã‚‚å¤§ä¸ˆå¤«ã€æ”¹å–„ã®ä½™åœ°ã¯ååˆ†ã‚ã‚Šã¾ã™ã€‚",
                    advice: "ã¾ãšã¯å°ã•ãªã‚¹ãƒ†ãƒƒãƒ—ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†ã€‚è‡ªåˆ†ãŒæä¾›ã—ã¦ã„ã‚‹ä¾¡å€¤ã‚’å…·ä½“çš„ã«æ›¸ãå‡ºã—ã€ãã‚Œã«è¦‹åˆã£ãŸå¯¾ä¾¡ã‚’å—ã‘å–ã‚‹ã“ã¨ã¯å½“ç„¶ã®æ¨©åˆ©ã ã¨èªè­˜ã™ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚",
                    action: "ä»Šé€±ä¸­ã«ã€è‡ªåˆ†ã®ã‚µãƒ¼ãƒ“ã‚¹ã®ä¾¡å€¤ã‚’5ã¤æ›¸ãå‡ºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ãã—ã¦ã€ãã®ä¾¡å€¤ã«è¦‹åˆã£ãŸä¾¡æ ¼è¨­å®šã‚’æ¤œè¨ã—ã¦ã¿ã¦ãã ã•ã„ã€‚"
                };
            } else {
                return {
                    type: "ãƒã‚¤ãƒ³ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ï¼šå¼·ã‚",
                    icon: "ğŸ”„",
                    description: "ãŠé‡‘ã«å¯¾ã™ã‚‹ãƒã‚¤ãƒ³ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ãŒã‹ãªã‚Šå¼·ã„çŠ¶æ…‹ã§ã™ã€‚è‡ªåˆ†ã®ä¾¡å€¤ã‚’éå°è©•ä¾¡ã—ã€é©æ­£ãªå¯¾ä¾¡ã‚’å—ã‘å–ã‚‹ã“ã¨ã«å¼·ã„æŠµæŠ—ã‚’æ„Ÿã˜ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚",
                    advice: "ã¾ãšã¯è‡ªåˆ†ã®æ€è€ƒãƒ‘ã‚¿ãƒ¼ãƒ³ã«æ°—ã¥ãã“ã¨ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†ã€‚ãŠé‡‘ã¯ä¾¡å€¤äº¤æ›ã®æ‰‹æ®µã§ã‚ã‚Šã€ã‚ãªãŸãŒæä¾›ã™ã‚‹ä¾¡å€¤ã«å¯¾ã™ã‚‹æ­£å½“ãªå¯¾ä¾¡ã§ã™ã€‚ç½ªæ‚ªæ„Ÿã‚’æ‰‹æ”¾ã—ã€å ‚ã€…ã¨ä¾¡å€¤ã‚’æä¾›ã™ã‚‹æ„è­˜ã‚’è‚²ã¦ã¦ã„ãã¾ã—ã‚‡ã†ã€‚",
                    action: "æ¯æ—¥5åˆ†é–“ã€ã€Œç§ã¯ä¾¡å€¤ã‚ã‚‹äººé–“ã§ã€é©æ­£ãªå¯¾ä¾¡ã‚’å—ã‘å–ã‚‹æ¨©åˆ©ãŒã‚ã‚‹ã€ã¨å£°ã«å‡ºã—ã¦è¨€ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã¾ãŸã€æˆåŠŸã—ã¦ã„ã‚‹èµ·æ¥­å®¶ã®æœ¬ã‚’1å†Šèª­ã‚“ã§ã¿ã¦ãã ã•ã„ã€‚"
                };
            }
        }

        // Data storage (localStorage for demo - in production, use proper backend)
        function saveUserData() {
            const totalScore = answers.reduce((sum, score) => sum + score, 0);
            const result = getResultType(totalScore);
            
            const data = {
                timestamp: new Date().toISOString(),
                name: userData.name,
                email: userData.email,
                score: totalScore,
                type: result.type,
                answers: answers
            };
            
            // Save to localStorage (in production, send to backend)
            let savedData = JSON.parse(localStorage.getItem('diagnosticData') || '[]');
            savedData.push(data);
            localStorage.setItem('diagnosticData', JSON.stringify(savedData));
            
            // In production, you would send this data to your backend:
            // sendToBackend(data);
        }

        // Admin functions
        function showAdmin() {
            document.getElementById('adminPanel').classList.remove('hidden');
            loadAdminData();
        }

        function loadAdminData() {
            const data = JSON.parse(localStorage.getItem('diagnosticData') || '[]');
            const tbody = document.getElementById('adminTableBody');
            tbody.innerHTML = '';
            
            data.forEach(entry => {
                const row = document.createElement('tr');
                row.className = 'border-b';
                row.innerHTML = `
                    <td class="px-4 py-2">${new Date(entry.timestamp).toLocaleString('ja-JP')}</td>
                    <td class="px-4 py-2">${entry.name}</td>
                    <td class="px-4 py-2">${entry.email}</td>
                    <td class="px-4 py-2">${entry.score}ç‚¹</td>
                    <td class="px-4 py-2">${entry.type}</td>
                `;
                tbody.appendChild(row);
            });
        }

        function exportData() {
            const data = JSON.parse(localStorage.getItem('diagnosticData') || '[]');
            const csv = [
                ['æ—¥æ™‚', 'ãŠåå‰', 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹', 'ã‚¹ã‚³ã‚¢', 'ã‚¿ã‚¤ãƒ—'],
                ...data.map(entry => [
                    new Date(entry.timestamp).toLocaleString('ja-JP'),
                    entry.name,
                    entry.email,
                    entry.score,
                    entry.type
                ])
            ].map(row => row.join(',')).join('\n');
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'diagnostic_data.csv';
            link.click();
        }

        function restartTest() {
            currentQuestion = 0;
            answers = [];
            userData = {};
            
            document.getElementById('resultsScreen').classList.add('hidden');
            document.getElementById('welcomeScreen').classList.remove('hidden');
            
            // Reset form
            document.getElementById('userName').value = '';
            document.getElementById('userEmail').value = '';
        }

        // Admin access (type "admin" in console to show admin panel)
        window.admin = showAdmin;

        // Sample backend integration code (commented out for demo)
        /*
        async function sendToBackend(data) {
            try {
                // Google Sheets API example
                const response = await fetch('YOUR_GOOGLE_APPS_SCRIPT_URL', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                // Firebase example
                // const response = await fetch('YOUR_FIREBASE_URL/diagnostics.json', {
                //     method: 'POST',
                //     headers: {
                //         'Content-Type': 'application/json',
                //     },
                //     body: JSON.stringify(data)
                // });
                
                if (!response.ok) {
                    throw new Error('ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            } catch (error) {
                console.error('Error saving data:', error);
                // Handle error appropriately
            }
        }
        */
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9753dabd7666fd4a',t:'MTc1NjIxNjgxNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>